<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java, Spring 의존성 주입(DI), 제어의 역전(IoC) | BLOG</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/blog/img/favicon.svg">
    <meta name="description" content="">
    <meta name="google-site-verification" content="5Yx4T6uI30XHP7CaIBllI-z_pTFiIF9H73JCnPtoqu0">
    <link rel="preload" href="/blog/assets/css/0.styles.09e527b0.css" as="style"><link rel="preload" href="/blog/assets/js/app.b6bef065.js" as="script"><link rel="preload" href="/blog/assets/js/16.925627ae.js" as="script"><link rel="preload" href="/blog/assets/js/2.7c09234c.js" as="script"><link rel="preload" href="/blog/assets/js/3.d4f92aff.js" as="script"><link rel="preload" href="/blog/assets/js/1.c37bbcf6.js" as="script"><link rel="preload" href="/blog/assets/js/30.14b9d9c9.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.1edd474b.js"><link rel="prefetch" href="/blog/assets/js/11.8ed8f407.js"><link rel="prefetch" href="/blog/assets/js/12.3ecfcd1d.js"><link rel="prefetch" href="/blog/assets/js/13.f777a1e1.js"><link rel="prefetch" href="/blog/assets/js/14.34a2b957.js"><link rel="prefetch" href="/blog/assets/js/15.b289349e.js"><link rel="prefetch" href="/blog/assets/js/17.f887e01b.js"><link rel="prefetch" href="/blog/assets/js/18.391210de.js"><link rel="prefetch" href="/blog/assets/js/19.838ae1fa.js"><link rel="prefetch" href="/blog/assets/js/20.fa1e108e.js"><link rel="prefetch" href="/blog/assets/js/21.0ea81ea5.js"><link rel="prefetch" href="/blog/assets/js/22.2cb91ff6.js"><link rel="prefetch" href="/blog/assets/js/23.01130645.js"><link rel="prefetch" href="/blog/assets/js/24.869984c0.js"><link rel="prefetch" href="/blog/assets/js/25.63438206.js"><link rel="prefetch" href="/blog/assets/js/26.9d0658a8.js"><link rel="prefetch" href="/blog/assets/js/27.32c7962a.js"><link rel="prefetch" href="/blog/assets/js/28.acca168f.js"><link rel="prefetch" href="/blog/assets/js/29.173f8ea5.js"><link rel="prefetch" href="/blog/assets/js/31.700cbc0b.js"><link rel="prefetch" href="/blog/assets/js/32.64074dce.js"><link rel="prefetch" href="/blog/assets/js/33.42054142.js"><link rel="prefetch" href="/blog/assets/js/34.a8702603.js"><link rel="prefetch" href="/blog/assets/js/35.c448a013.js"><link rel="prefetch" href="/blog/assets/js/36.87fa6cf0.js"><link rel="prefetch" href="/blog/assets/js/37.6b0822a4.js"><link rel="prefetch" href="/blog/assets/js/38.d50ca80b.js"><link rel="prefetch" href="/blog/assets/js/39.73110418.js"><link rel="prefetch" href="/blog/assets/js/4.5e9dacdc.js"><link rel="prefetch" href="/blog/assets/js/40.2216713a.js"><link rel="prefetch" href="/blog/assets/js/6.437c7f19.js"><link rel="prefetch" href="/blog/assets/js/7.ec655d79.js"><link rel="prefetch" href="/blog/assets/js/8.6bf33bd5.js"><link rel="prefetch" href="/blog/assets/js/9.b316188b.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.09e527b0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-23c072b8><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/logo.png" alt="BLOG" class="logo"> <span class="site-name can-hide">BLOG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Groovy</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Groovy/spock-summary.html" class="sidebar-link">Spock 사용 시 주의해야 할 것들</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Java/awsEc2InstallJDK11.html" class="sidebar-link">AWS EC2에 JDK 11 설치하기</a></li><li><a href="/blog/Java/javaOverloadingParameter.html" class="sidebar-link">JAVA 매개변수(Parameter)수가 같은 오버로딩 메서드가 위험한 이유</a></li><li><a href="/blog/Java/threadPoolExecutor.html" class="sidebar-link">Java의 ThreadPoolExecutor, Spring의 ThreadPoolTaskExecutor</a></li><li><a href="/blog/Java/whyCantCreateGenericsArray.html" class="sidebar-link">JAVA 제네릭 배열을 생성하지 못하는 이유</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Kotlin</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Kotlin/kotlinInAction.html" class="sidebar-link">코틀린 인 액션 정리</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Spring</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Spring/DI_IOC.html" aria-current="page" class="active sidebar-link">Java, Spring 의존성 주입(DI), 제어의 역전(IoC)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Spring/DI_IOC.html#_1-의존성-주입-dependency-injection" class="sidebar-link">1. 의존성 주입(Dependency Injection)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Spring/DI_IOC.html#의존성" class="sidebar-link">의존성</a></li><li class="sidebar-sub-header"><a href="/blog/Spring/DI_IOC.html#의존성-주입" class="sidebar-link">의존성 주입</a></li><li class="sidebar-sub-header"><a href="/blog/Spring/DI_IOC.html#의존성-주입의-장점" class="sidebar-link">의존성 주입의 장점</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Spring/DI_IOC.html#_2-제어의-역전-inversion-of-control" class="sidebar-link">2. 제어의 역전(Inversion of Control)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Spring/DI_IOC.html#스프링의-ioc" class="sidebar-link">스프링의 IoC</a></li></ul></li></ul></li><li><a href="/blog/Spring/Scheduler.html" class="sidebar-link">스프링 TaskScheduler DeepDive(@EnableScheduling, @Scheduled)</a></li><li><a href="/blog/Spring/SpringBoot_Custom_Config_Properties.html" class="sidebar-link">SpringBoot Type-Safe하게 Property 설정하기</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Vue/N1VuePressCh1.html" class="sidebar-link">VuePress로 블로그 제작 1 시작하기</a></li><li><a href="/blog/Vue/N2VuePressCh2.html" class="sidebar-link">VuePress로 블로그 제작 2 배포하기</a></li><li><a href="/blog/Vue/vuexModuleAutoRegister.html" class="sidebar-link">Vuex 모듈 등록 자동화하기</a></li></ul></section></li></ul> </aside> <aside class="rightbar" data-v-d6a77228><div class="pr-2" data-v-c620ccac data-v-d6a77228><div class="header" data-v-c620ccac><a href="/blog/Spring/DI_IOC.html#_1-의존성-주입-dependency-injection" class="rightbar-link" data-v-c620ccac>
      1. 의존성 주입(Dependency Injection)
    </a> <div data-v-c620ccac data-v-c620ccac><div class="header" data-v-c620ccac><a href="/blog/Spring/DI_IOC.html#의존성" class="rightbar-link" data-v-c620ccac>
      의존성
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Spring/DI_IOC.html#의존성-주입" class="rightbar-link" data-v-c620ccac>
      의존성 주입
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Spring/DI_IOC.html#의존성-주입의-장점" class="rightbar-link" data-v-c620ccac>
      의존성 주입의 장점
    </a> <div data-v-c620ccac data-v-c620ccac></div></div></div></div><div class="header" data-v-c620ccac><a href="/blog/Spring/DI_IOC.html#_2-제어의-역전-inversion-of-control" class="rightbar-link" data-v-c620ccac>
      2. 제어의 역전(Inversion of Control)
    </a> <div data-v-c620ccac data-v-c620ccac><div class="header" data-v-c620ccac><a href="/blog/Spring/DI_IOC.html#스프링의-ioc" class="rightbar-link" data-v-c620ccac>
      스프링의 IoC
    </a> <div data-v-c620ccac data-v-c620ccac></div></div></div></div></div></aside> <main class="page"><div class="block content-title" data-v-73713578 data-v-23c072b8><div style="width: 100%" data-v-73713578><div class="w-11/12 mx-auto title" data-v-73713578><h1 class="title" data-v-73713578>Java, Spring 의존성 주입(DI), 제어의 역전(IoC)</h1></div> <div class="text--primary text-right w-95 mr-5 my-2" data-v-73713578>
      작성일: 2020-08-16 17:29
    </div> <div class="w-100 text-center" data-v-73713578><!----></div> <hr class="content-divider" data-v-73713578></div></div> <div class="theme-default-content content__default"><ul><li>의존성 주입과 제어의 역전은 스프링 공부를 하게 되면 반드시 접하게 되는 개념입니다.</li> <li>사실 이 개념들은 스프링 철학에 중심이 되는 개념일 뿐 스프링에만 속하는 특정한 개념들이 아니지만, 저의 경우 스프링 공부를 하면서 처음 접했고 단번에 이해하기 쉽지 않은 개념들인거 같습니다.</li></ul> <h2 id="_1-의존성-주입-dependency-injection"><a href="#_1-의존성-주입-dependency-injection" class="header-anchor">#</a> 1. 의존성 주입(Dependency Injection)</h2> <ul><li>의존성 주입을 알아보기 전에 <strong>의존성</strong>이 무엇인지에 대해 알아보겠습니다.</li></ul> <h3 id="의존성"><a href="#의존성" class="header-anchor">#</a> 의존성</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Getter</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> userId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> phoneNumber<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserRepository</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userStore<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">UserRepository</span> userRepository<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ul><li>UserService.register가 호출되면 userRepository에 해당 user를 저장하고 회원가입이 완료되는 간단한 로직입니다.</li> <li>자바에서 어떤 대상에게 의존성을 가지는 방법은 다양하며 UserService와 같이 필드 변수에 다른 객체를 가지고 있는 경우도 그중 하나입니다.</li> <li>즉 UserService class에서 <strong>UserService</strong>는 <strong>UserRepository</strong>에 대해 의존하고 있기 때문에 <strong>의존성</strong>을 가진다고 할 수 있습니다.</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserService</span> userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userService<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span> <span class="token string">&quot;Jayden&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;qwe@gmail.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;010-1234-1234&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>위의 코드를 실행시켜보면 어떤 일이 발생할까요?</li> <li>현재 userService에는 userRepository가 필드에 정의만 되어있을 뿐 어디에서도 인스턴스화 하지 않았기 때문에 userRepository는 Null이므로 NullPointerExcpetion가 발생할 것입니다.</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">UserRepository</span> userRepository <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>가장 단순한 방법으로는 필드를 정의함과 동시에 UserRepository 객체를 생성해주면 정상적으로 동작할 것입니다.</li> <li>즉 해당 코드를 동작시키기 위해서는 어떻게든 의존하고 있는 대상(UserRepository)에 대해 실제 객체를 정의해줘야 합니다.</li> <li>지금과 같이 필드에서 객체를 직접 생성하지 않고 userRepository를 사용하기 위해선 또 어떤 방법이 있을까요?</li></ul> <h3 id="의존성-주입"><a href="#의존성-주입" class="header-anchor">#</a> 의존성 주입</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">UserRepository</span> userRepository<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">UserService</span><span class="token punctuation">(</span><span class="token class-name">UserRepository</span> userRepository<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userRepository <span class="token operator">=</span> userRepository<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>UserService를 생성할 때 외부에서 UserRepository를 함께 결정하여 생성자 파라미터로 전달할 수 있을 것입니다.</li> <li>이렇게 <strong>의존하는 대상을 직접 결정하는 것이 아닌 외부에서 결정하여 주입해주는 것을 의존성 주입이라고 합니다.</strong></li> <li>UserService에서 사용할 객체를 직접 정의하지 않고 외부에서 주입해주는게 어떤 도움이 될까요?</li></ul> <h3 id="의존성-주입의-장점"><a href="#의존성-주입의-장점" class="header-anchor">#</a> 의존성 주입의 장점</h3> <ul><li>의존성 주입을 활용하면 의존 객체의 생성과 사용의 책임을 분리할 수 있습니다.
<ul><li>생성과 사용의 책임을 분리하면 UserService에서는 UserRepository가 어떻게 만들어지는지 생각하지 않고 단지 UserRepository를 사용하기만 하면 됩니다.</li> <li><strong>책임 분리를 통해 관심사를 분리하면 개발 시 생각할 범위를 좁힐 수 있어 복잡도를 줄일 수 있습니다.</strong></li></ul></li> <li>의존하는 객체와의 의존 관계를 컴파일 타임이 아닌 런타임에 결정할 수 있습니다.
<ul><li>만약 UserRepository가 인터페이스라면 UserService는 컴파일 타임에는 실제로 UserRepository를 구현한 대상에 대해 알 수 없고 단지 인터페이스인 UserRepository에만 의존하게 됩니다.</li> <li>실제 런타임 시 UserService를 생성할 때 넘겨주는 UserRepository의 구현체에 따라 UserService가 의존하는 UserRepository 대상은 달라질 것입니다.</li> <li>이는 인터페이스가 아닌 단일 클래스에 의존하더라도 프록시를 활용하여 UserRepsitory의 프록시 객체를 주입해줄 수 있습니다.</li> <li><strong>컴파일 타임이 아닌 런타임에 의존 관계를 결정하면 코드의 변경없이 기능을 확장할 수 있습니다.</strong></li></ul></li></ul> <h4 id="생성과-사용의-책임-분리"><a href="#생성과-사용의-책임-분리" class="header-anchor">#</a> 생성과 사용의 책임 분리</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ObjectFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">UserService</span> <span class="token function">userService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserService</span><span class="token punctuation">(</span><span class="token function">userRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">UserRepository</span> <span class="token function">userRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ObjectFactory</span> objectFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserService</span> userService <span class="token operator">=</span> objectFactory<span class="token punctuation">.</span><span class="token function">userService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userService<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span> <span class="token string">&quot;Jayden&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;qwe@gmail.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;010-1234-1234&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li>의존성 주입을 활용하면 ObjectFactory와 같이 객체의 생성만을 담당하는 Factory를 만들 수 있습니다.</li> <li>Factory에서는 오직 객체의 생성만을 담당하기 때문에 객체 생성에 대한 변경이 필요할 때는 Factory만 살펴보면 되고, 해당 객체들을 사용하는 측에서는 어떻게 객체가 생성되는지 신경쓰지 않아도 됩니다.</li></ul> <h4 id="런타임에-의존-관계를-결정"><a href="#런타임에-의존-관계를-결정" class="header-anchor">#</a> 런타임에 의존 관계를 결정</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">NotificationService</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">,</span> <span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">UserRepository</span> userRepository<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">NotificationService</span> notificationService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">UserService</span><span class="token punctuation">(</span><span class="token class-name">UserRepository</span> userRepository<span class="token punctuation">,</span> <span class="token class-name">NotificationService</span> notificationService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userRepository <span class="token operator">=</span> userRepository<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>notificationService <span class="token operator">=</span> notificationService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        notificationService<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token string">&quot;회원가입 성공!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li>회원가입을 하는 로직에서 회원가입이 완료되면 알림을 보내는 서비스를 정의해보았습니다.</li> <li>UserService는 NotificationService에 대해 의존 관계를 가지고 있고, 생성자를 통해 의존성을 주입하고 있습니다.</li> <li>여기서 NotificaitonService는 인터페이스이기 때문에 해당 코드만으로는 실제 어떤 NotificationService를 통해 알림을 보내는지 알 수 없습니다.</li> <li>그러므로 컴파일 타임으로는 실제로 의존하는 NotificationService의 구현체를 알 수 없고 런타임 시 생성자에 넘어오는 NotificationService의 구현체에 따라 달라질 것입니다.</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SMSNotificationService</span> <span class="token keyword">implements</span> <span class="token class-name">NotificationService</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">,</span> <span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;[문자 전송] To: &quot;</span> <span class="token operator">+</span> user<span class="token punctuation">.</span><span class="token function">getPhoneNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; Message: &quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MailNotificationService</span> <span class="token keyword">implements</span> <span class="token class-name">NotificationService</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">,</span> <span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;[이메일 전송] To: &quot;</span> <span class="token operator">+</span> user<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; Message: &quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ObjectFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">UserService</span> <span class="token function">userService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserService</span><span class="token punctuation">(</span><span class="token function">userRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">smsNotificationService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">UserRepository</span> <span class="token function">userRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token class-name">NotificationService</span> <span class="token function">smsNotificationService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SMSNotificationService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ObjectFactory</span> objectFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserService</span> userService <span class="token operator">=</span> objectFactory<span class="token punctuation">.</span><span class="token function">userService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userService<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span> <span class="token string">&quot;Jayden&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;qwe@gmail.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;010-1234-1234&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><ul><li>SMS, Mail 알림 서비스가 있을 때 UserService의 NotificationService는 UserService를 생성할 때 넘겨주는 실체 구현 객체에 따라 UserService에서 사용하는 NotificationService는 달라질 것입니다.</li> <li>UserService는 단지 NotificationService에서만 의존하지만 런타임에 따라 실제 의존하는 대상들을 다르게 주입해줄 수 있기 때문에 <strong>UserService의 코드를 변경하지 않고도 기능을 확장할 수 있게 됩니다.</strong> <ul><li>만약 제가 UserService를 생성할 때 MailNotificationService 객체를 주입해줬다면 UserService의 코드는 아무런 변경없이 SMS에서 Mail로 알림을 변경할 수 있게 됩니다.</li> <li>사실 이는 널리 알러진 디자인 패턴 중 하나인 <strong>전략(Strategy) 패턴</strong>입니다.</li></ul></li> <li>main 메서드에서는 ObjectFactory를 통해 UserService를 사용할 뿐 생성에 대해 어떠한 책임도 없기 때문에 NotificationService가 추가되어도 코드의 변경이 필요 없었습니다.</li></ul> <h2 id="_2-제어의-역전-inversion-of-control"><a href="#_2-제어의-역전-inversion-of-control" class="header-anchor">#</a> 2. 제어의 역전(Inversion of Control)</h2> <ul><li>제어의 역전이라는 용어는 다양한 곳에서 사용되는 용어입니다.</li> <li>어떤 객체가 의존하는 객체들을 스스로 선택한다면 해당 객체는 자신에 대한 제어권을 가진다고 할 수 있습니다.</li> <li>그러므로, 이러한 제어권이 역전되어 어떤 객체가 의존하는 객체들을 스스로 선택하는게 아닌 외부에 의해 결정되는 것도 제어의 역전이라고 할 수 있습니다.
<ul><li>현재 ObjectFactory에서 의존성 주입을 통해 객체들이 의존하는 객체들을 결정해주고 있습니다.</li></ul></li> <li><strong>이를 통해 의존성 주입은 제어의 역전을 이루기위해 사용할 수 있는 하나의 방법인것을 알 수 있습니다.</strong> <ul><li>스프링을 공부하면 의존성 주입과 제어의 역전라는 용어는 언제나 함께 나오는 이유가 스프링에서는 의존성 역전을 위해 가장 많이 사용되는 방법이 의존성 주입이기 때문입니다.</li></ul></li></ul> <h3 id="스프링의-ioc"><a href="#스프링의-ioc" class="header-anchor">#</a> 스프링의 IoC</h3> <ul><li>스프링에는 ObjectFactory와 같은 역할을 하는 ApplicationContext가 존재하며 이를 IoC 컨테이너, DI 컨테이너라고 부릅니다.</li> <li>ApplicationContext에서는 스프링 빈으로 등록된 객체들의 관리해줍니다.
<ul><li>스프링 빈이란 ApplicationContext가 제어권을 가질 수 있는 객체들을 의미합니다.</li></ul></li> <li>ObjectFactory에서는 단지 객체들의 생성을 관리해주지만, ApplicationContext에서는 객체의 생성 뿐만아니라 생명주기 및 스코프등 설정에 따라 수많은 기능을 제공해줍니다.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/Kotlin/kotlinInAction.html" class="prev">
        코틀린 인 액션 정리
      </a></span> <span class="next"><a href="/blog/Spring/Scheduler.html">
        스프링 TaskScheduler DeepDive(@EnableScheduling, @Scheduled)
      </a>
      →
    </span></p></div> <div id="disqus_thread" data-v-d55ebfc6 data-v-23c072b8></div></main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.b6bef065.js" defer></script><script src="/blog/assets/js/16.925627ae.js" defer></script><script src="/blog/assets/js/2.7c09234c.js" defer></script><script src="/blog/assets/js/3.d4f92aff.js" defer></script><script src="/blog/assets/js/1.c37bbcf6.js" defer></script><script src="/blog/assets/js/30.14b9d9c9.js" defer></script>
  </body>
</html>
